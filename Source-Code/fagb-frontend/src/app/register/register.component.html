<section class="hero">
  <div class="hero-body">
    <div class="container">

      <div id="stepper">
        <mat-vertical-stepper linear #stepper>
          <mat-step [stepControl]="profileForm" state="profile" [editable]="isEditable" [optional]="true">
            <form [formGroup]="profileForm" (ngSubmit)="onProfileSubmit(profileForm.value)">
              <div>
                <ng-template matStepLabel><span class="ng-template">Fill out your Profile</span></ng-template>
                <mat-form-field>
                  <mat-label>Nickname</mat-label>
                  <input matInput formControlName="nameCtrl" required>
                  <mat-error *ngIf="hasError('nameCtrl', 'required')">Nickname is required test.</mat-error>
                  <mat-error *ngIf="hasError('nameCtrl', 'maxlength')">Nickname must be shorter than 32 characters.
                  </mat-error>
                  <mat-error *ngIf="hasError('nameCtrl', 'minlength')">Nickname must be at least 4 characters long.
                  </mat-error>
                </mat-form-field>
                <mat-error *ngIf="profileForm.hasError('nameIsRequired')">
                  Nickname is required!
                </mat-error>
                <mat-form-field>
                  <mat-label>Discord Tag</mat-label>
                  <input matInput formControlName="tagCtrl" required>
                  <mat-error *ngIf="hasError('tagCtrl', 'required')">Discord Tag is required .</mat-error>
                  <mat-error *ngIf="hasError('tagCtrl', 'pattern')">Discord Tag must be in this format: Name#1234.
                  </mat-error>
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <mat-label>E-Mail</mat-label>
                  <input matInput formControlName="mailCtrl" required>
                  <mat-error *ngIf="hasError('mailCtrl', 'required')">Email is required.</mat-error>
                  <mat-error *ngIf="hasError('mailCtrl', 'forbiddenEmail')">Email is invalid.</mat-error>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Birthdate</mat-label>
                  <input matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate" formControlName="dateCtrl" required> 
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
                  <mat-error *ngIf="hasError('dateCtrl', 'required')">Birthdate is required.</mat-error>
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <mat-label>Region</mat-label>
                  <mat-select formControlName="regionCtrl" required>
                    <mat-option *ngFor="let region of regionList" [value]="region.id">{{region.name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="hasError('regionCtrl', 'required')">Region is required.</mat-error>
                </mat-form-field>

                <mat-form-field>
                  <mat-label>Languages</mat-label>
                  <mat-select formControlName="langCtrl" multiple required>
                    <!-- <mat-select-trigger>
                      {{profileForm.get(langCtrl).value ? profileForm.get(langCtrl).value[0] : ''}}
                      <span *ngIf="profileForm.get(langCtrl).value?.length > 1" class="example-additional-selection">
                        (+{{profileForm.get(langCtrl).value.length - 1}} {{profileForm.get(langCtrl).value?.length === 2 ? 'other' : 'others'}})
                      </span>
                    </mat-select-trigger> -->
                    <mat-option *ngFor="let lang of langList" [value]="lang.id">{{lang.name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="hasError('langCtrl', 'required')">Select at least one language.</mat-error>
                </mat-form-field>

                <!-- <mat-form-field>
                  <mat-label>Toppings</mat-label>
                  <mat-select [formControl]="toppings" multiple>
                    <mat-select-trigger>
                      {{toppings.value ? toppings.value[0] : ''}}
                      <span *ngIf="toppings.value?.length > 1" class="example-additional-selection">
                        (+{{toppings.value.length - 1}} {{toppings.value?.length === 2 ? 'other' : 'others'}})
                      </span>
                    </mat-select-trigger>
                    <mat-option *ngFor="let topping of toppingList" [value]="topping">{{topping}}</mat-option>
                  </mat-select>
                </mat-form-field> -->

              </div>
              <div>
                <mat-form-field>
                  <mat-label>Password</mat-label>
                  <input matInput [type]="hide ? 'password' : 'text' " formControlName="passCtrl" required>
                  <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                    [attr.aria-pressed]="hide">
                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>repeat Password</mat-label>
                  <input matInput [type]="hide ? 'password' : 'text' " formControlName="rpassCtrl" required>
                  <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                    [attr.aria-pressed]="hide">
                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                </mat-form-field>
              </div>
              <div>
                <button mat-button matStepperNext class="button is-dark" type="submit"
                  [disabled]="profileForm.invalid">Next</button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="gameForm" state="games" [editable]="isEditable">
            <form [formGroup]="gameForm" (ngSubmit)="onGameSubmit(gameForm.value)">
              <ng-template matStepLabel><span class="ng-template">Fill out</span></ng-template>
              <div>
                <button mat-button matStepperNext>Next</button>
              </div>
              <app-add-game [gameForm]="gameForm"></app-add-game>
              <div>
                <button mat-button matStepperNext type="submit">Next</button>
              </div>
            </form>
          </mat-step>

          <mat-step state="done_all">
            <ng-template matStepLabel><span class="ng-template">Done</span></ng-template>
            <div>
              <p>You are now done.</p>
              <p>Enjoin your expierence on FAGB</p>
            </div>
          </mat-step>

          <!-- Icon overrides. -->
          <ng-template matStepperIcon="profile">
            <mat-icon class="material-icons-outlined">account_circle</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="games">
            <mat-icon class="material-icons-outlined">games</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="done_all">
            <mat-icon class="material-icons-outlined">done_all</mat-icon>
          </ng-template>
        </mat-vertical-stepper>
      </div>
    </div>
  </div>
</section>
